#version 430

layout(triangles) in;

layout( line_strip, max_vertices = 4 )out;

uniform mat4 WorldTransMatrix;

uniform mat4 projectionMatrix;

uniform mat4 viewMatrix;

void main()
{
	vec4 pos;
	
	mat4   vpm = projectionMatrix*viewMatrix*WorldTransMatrix;
	
	for (int i=0;i<gl_in.length();i++)
	{
		pos = gl_in[i].gl_Position;
		
		gl_Position = vpm *pos;
		
		EmitVertex();
	}
	
	pos = gl_in[0].gl_Position;
	
	gl_Position=vpm *pos;
		
	EmitVertex();
	
	EndPrimitive();
	
}