#version 430

layout(triangles) in;

#include CameraDefinition;

#include TerrainMaterialData;

// layout( line_strip, max_vertices = 4 )out;
layout( triangle_strip, max_vertices = 3 )out;

in vec2 mapCoord_GS[];

out vec2 mapCoord_FS;

out vec3 position_FS;

out vec3 tangent_FS;

uniform sampler2D normalMap;
  
uniform vec3 cameraPosition;
  
void main()
{
	vec4 pos;
	
	mat4   vpm = projectionMatrix*viewMatrix;
	
	for (int i=0;i<gl_in.length();i++)
	{
		pos = gl_in[i].gl_Position;
		
		gl_Position = vpm *pos;
		
		mapCoord_FS=mapCoord_GS[i];
		
		EmitVertex();
	}
  	
    /*pos = gl_in[0].gl_Position;
	
	gl_Position=vpm *pos;
	
	mapCoord_FS=mapCoord_GS[0];
	
	EmitVertex();   
	
	EndPrimitive();*/
	
}